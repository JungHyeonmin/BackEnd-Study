# 미니 좌석예약 페이지 #
> Spring을 이용해 미니 좌석 예약페이지를 만들어보자

## :dart: 목표 ##
- 자주 쓰이는 어노테이션 학습
- Spring Container 개념정리
- websocket 활용
- Redis 활용
- 스케줄링
- 리액트 복습 & 실습

## :world_map: 범위 ##
spring core

## :hammer_and_wrench: 사용 기술 ##

[![My Skills](https://skillicons.dev/icons?i=spring,react,mysql,redis)](https://skillicons.dev)

## :상세 내용: ##

- MySQL : 좌석 정보와 예약 정보를 저장할 메인 DB 좌석의 상태관리를 저장하는 테이블을 관리
- Redis : 좌석의 상태를 캐시에 저장하여 빠르게 조회하고, 동시에 여러 사용자가 접근할때 동시성 문제를 방지
- WebSocket : 실시간으로 좌석 상태가 바뀌는 것을 사용자에게 즉시 알려주는 역할
- Redis Pub/Sub : WebSocket을 사용할 때 좌석의 상태 변화를 Redis의 Pub/Sub 시스템을 이용해 관리


## :예약 로직 흐름: ##
### 좌석 조회 
- 사용자가 페이지에 접속하면, 좌석 정보를 Redis에서 가져와 좌석의 상태(예약가능, 예약 중, 예약 완료)를 제공.

### 좌석 클릭 (예약 요청)
- 사용자가 좌석을 클릭하여 예약을 시도하면, Redis에 좌석 상태를'예약 중'으로 업데이트. 동시에 다른 사용자가 좌석을 클릭 하지 못하도록 막음.

### 예약 확정 
- 사용자가 예약 절차를 완료하면, 서버는 해당 좌석을 '예약 완료' 상태로 변경하고 MySQL에 최종 예약 정보를 저장. WebSocket을 통해 다른 사용자들에게 좌석의 상태가 변경되었음을 실시간으로 알림

### 타임아웃 처리 
- 사용자가 예약 절차를 완료하지 않고 중간에 이탈 혹은 일정 시간이 지나면 Redis에서 좌석 상태를 '예약 가능'으로 되돌려 다른 사용자가 예약을 할 수있도록 함. (여기서 스케줄링을 통해 관리작업.)